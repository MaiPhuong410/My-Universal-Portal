<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sn_ex_sp_activity_configuration">
    <sn_ex_sp_activity_configuration action="INSERT_OR_UPDATE">
        <active>true</active>
        <activity_name>Your Cases</activity_name>
        <advanced>true</advanced>
        <external_link/>
        <internal_link display_value="your_csm_cases">0d4adf8d476c5110be5a9db6926d4392</internal_link>
        <items_count_script><![CDATA[new global.AssessmentUtils().getMyFilteredCases().length;]]></items_count_script>
        <list_view_script><![CDATA[new global.AssessmentUtils().listCase();
// try {
//     var caseList = new global.AssessmentUtils().getMyFilteredCases();
//     gs.info("PhuongNTM caseList" + caseList);
//     getCaseData(recordsLimit, caseList);


// } catch (ex) {
//     gs.info("PhuongNTM err" + ex);
// }

// function getCaseData(recordsLimit, caseList) {
//     var i = 0;
//     for (i; i < caseList.length; i++) {
//         var taskIDs = Object.keys(caseList[i]);
//         gs.info("PhuongNTM", taskIDs);
//         var gr = new GlideRecordSecure('sn_customerservice_case');
//         gr.addQuery('sys_id', taskIDs);
//         gr.addActiveQuery();
//         gr.orderByDesc('sys_updated_on');
//         gr.query();
//         return _getCaseListViewData(gr, caseList, recordsLimit);
//     }
// }

// function _getCaseListViewData(gr, caseList, recordsLimit) {
//     var ids = [];
//     var recordIdx = 0;
//     while (gr.next() && recordIdx < recordsLimit) {
//         var caseBadgeColor = "#CBE9FC";
//         var reqConfigRecord = caseList[gr.sys_id];
//         var portalSettings = {};
//         var page = reqConfigRecord.page;
//         var primary_display = reqConfigRecord.primary_display;
//         var secondary_display = reqConfigRecord.secondary_displays;
//         if (gr.getRecordClassName() == 'sn_customerservice_case') {
//             var caseData = new GlideRecord("sn_customerservice_case");
//             caseData.addQuery("number", gr.getUniqueValue());
//             caseData.query();
//             if (caseData.getRowCount() == 0)
//                 continue;
//             if (caseData.getRowCount() > 1)
//                 portalSettings.title = (gs.getMessage("{0} case", caseData.getRowCount()));
//             else {
//                 caseData.next();
//                 portalSettings.title = (caseData.number.getDisplayValue() || caseData.getDisplayValue("short_description"));
//             }
//             page = page ? page : 'csm_cases';
//             portalSettings.itemUrl = "?id=" + page + "&table=sn_customerservice_case&sys_id=" + gr.getUniqueValue();
//         } else {
//             portalSettings.title = (primary_display ? getFieldDisplayValue(gr, primary_display) : getFieldDisplayValue(gr, 'number'));
//             page = page ? page : 'ticket';
//             portalSettings.itemUrl = "?id=" + page + "&table=" + gr.getRecordClassName() + "&sys_id=" + gr.getUniqueValue();
//         }
//         if (secondary_display) {
//             var secondaryFields = secondary_display.split(",");
//             portalSettings.description = secondaryFields[0] ? getFieldDisplayValue(gr, secondaryFields[0]) : "";
//             portalSettings.field1Label = secondaryFields[1] ? getFieldLabel(gr, secondaryFields[1]) : "";
//             portalSettings.field1Value = secondaryFields[1] ? getFieldDisplayValue(gr, secondaryFields[1]) : "";
//             portalSettings.field2Label = secondaryFields[2] ? getFieldLabel(gr, secondaryFields[2]) : "";
//             portalSettings.field2Value = secondaryFields[2] ? getFieldDisplayValue(gr, secondaryFields[2]) : "";
//         } else
//             portalSettings.description = (this.getFieldDisplayValue(gr, 'short_description'));
//         portalSettings.badge = this.getFieldDisplayValue(gr, 'state');
//         portalSettings.badgeTextColor = "#181A1F";
//         portalSettings.badgeColor = requestBadgeColor;
//         portalSettings.target = "";
//         if (this._isValidActivityObject(portalSettings)) {
//             ids.push(portalSettings);
//             recordIdx++;
//         }
//     }
//     return ids;
// }

// function getFieldDisplayValue(gr, name) {
//     var id = gr.getUniqueValue();
//     gr = new GlideRecord(gr.getRecordClassName());
//     if (gr.get(id))
//         return gr.getDisplayValue(name);
//     else
//         return "";
// }

// function getFieldLabel(gr, name) {
//     gr = new GlideRecord(gr.getRecordClassName());
//     return gr.getElement(name).getLabel();
// }]]></list_view_script>
        <order>100</order>
        <primary>false</primary>
        <sort_by>sys_created_on</sort_by>
        <sort_order>asc</sort_order>
        <sys_class_name>sn_ex_sp_activity_configuration</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-07-06 02:25:19</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>0cdc5e4147a85110be5a9db6926d4353</sys_id>
        <sys_mod_count>16</sys_mod_count>
        <sys_name>Your Cases</sys_name>
        <sys_overrides/>
        <sys_package display_value="My CSM" source="x_554940_my_csm">0136b21e2f001110d44693acf699b64c</sys_package>
        <sys_policy/>
        <sys_scope display_value="My CSM">0136b21e2f001110d44693acf699b64c</sys_scope>
        <sys_update_name>sn_ex_sp_activity_configuration_0cdc5e4147a85110be5a9db6926d4353</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-07-06 07:32:01</sys_updated_on>
        <target_page>INTERNAL</target_page>
    </sn_ex_sp_activity_configuration>
</record_update>
